<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
  <script>
    // 1. Lớp cha CarCl
    class CarCl {
      constructor(make, speed) {
        this.make = make;
        this.speed = speed;
      }

      // Cập nhật phương thức brake để có thể nối chuỗi
      brake() {
        this.speed -= 5;
        console.log(`${this.make} đang chạy chậm lại: ${this.speed} km/h`);
        return this; // Cho phép nối chuỗi
      }

      accelerate() {
        this.speed += 10;
        console.log(`${this.make} đang chạy: ${this.speed} km/h`);
        return this;
      }
    }

    // 2. Lớp con EVCl kế thừa từ CarCl
    class EVCl extends CarCl {
      // 2. Đặt thuộc tính charge là tư nhân (Private)
      #charge;

      constructor(make, speed, charge) {
        // Gọi constructor của lớp cha
        super(make, speed);
        this.#charge = charge;
      }

      chargeBattery(chargeTo) {
        this.#charge = chargeTo;
        console.log(`${this.make} đã sạc pin lên: ${this.#charge}%`);
        return this; // Cho phép nối chuỗi
      }

      // Ghi đè phương thức accelerate
      accelerate() {
        this.speed += 20;
        this.#charge--;
        console.log(
          `${this.make} đang chạy với tốc độ ${this.speed} km/h, pin còn lại: ${this.#charge}%`
        );
        return this; // Cho phép nối chuỗi
      }
    }

    // --- THỬ NGHIỆM VỚI DỮ LIỆU TEST ---
    // Data car 1: 'Rivian' going at 120 km/h, with a charge of 23%
    const rivian = new EVCl('Rivian', 120, 23);

    console.log('--- Trạng thái ban đầu ---');
    console.log(rivian);

    // 3. Thực hiện nối chuỗi phương thức (Method Chaining)
    console.log('--- Thử nghiệm Chaining ---');
    rivian
      .accelerate()      
      .accelerate()      
      .brake()           
      .chargeBattery(90) 
      .accelerate()     
      .brake();          
  </script>
</body>

</html>